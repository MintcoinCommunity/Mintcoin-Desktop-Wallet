language: cpp
sudo: false

addons:
  # Ubuntu packages
  apt:
    packages:
      # These are required by the Linux build
      - libdb++-dev
      - libboost-all-dev
      - libqrencode-dev
      - libminiupnpc-dev
      - libminiupnpc8
      # These are required by the Linux Qt build
      - qt4-qmake
      - libqt4-dev

install:
#  - if [ $TRAVIS_OS_NAME = osx ]; then brew install db miniupnpc qrencode; brew upgrade openssl; fi
  - if [ $TRAVIS_OS_NAME = osx ]; then brew install miniupnpc qrencode; fi
  - if [ $TRAVIS_OS_NAME = osx ]; then curl -LO https://raw.githubusercontent.com/GiovanniBussi/macports-ci/master/macports-ci && chmod +x ./macports-ci && ./macports-ci install; fi
  - if [ $TRAVIS_OS_NAME = osx ]; then sudo /opt/local/bin/port install db openssl; fi

matrix:
  include:
  # Build mintcoind
  # Ubuntu 14.04 LTS (Trusy Tahr) is our latest (and only) Ubuntu version
  - os: linux
    dist: trusty
    script: cd src && make -f makefile.unix -j2

  # Build mintcoind
  # Ubuntu 16.04 LTS (Xenial Xerus) not supported yet
  #- os: linux
  #  dist: xenial
  #  script: cd src && make -f makefile.unix -j2

  # Build mintcoind
  # OS X 10.12 (Sierra)
  - os: osx
    osx_image: xcode8.3
    script: cd src && make -f makefile.osx -j2

  # Build MintCoin-Qt
  # Ubuntu 14.04 LTS (Trusy Tahr) is our latest (and only) Ubuntu version
  - os: linux
    dist: trusty
    script: qmake && make -j2

  # Build MintCoin-Qt
  # Ubuntu 16.04 LTS (Xenial Xerus) not supported yet
  #- os: linux
  #  dist: xenial
  #  script: qmake && make -j2

  # Build MintCoin-Qt
  # OS X 10.12 (Sierra)
  #- os: osx
  #  osx_image: xcode8.3
  #  script: qmake && make -j2
